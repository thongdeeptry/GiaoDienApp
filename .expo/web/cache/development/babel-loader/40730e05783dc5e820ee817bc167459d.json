{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport PanResponder from \"react-native-web/dist/exports/PanResponder\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Card from \"../Card\";\nimport Footer from \"../Footer\";\nimport { ACTION_OFFSET, CARD } from \"../utils/constants\";\nimport { pets as petsArray } from \"./data\";\nimport { styles } from \"./styles\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function Main(_ref) {\n  var route = _ref.route,\n      navigation = _ref.navigation;\n\n  var _useState = useState(petsArray),\n      _useState2 = _slicedToArray(_useState, 2),\n      pets = _useState2[0],\n      setPets = _useState2[1];\n\n  var swipe = useRef(new Animated.ValueXY()).current;\n  var tiltSign = useRef(new Animated.Value(1)).current;\n  useEffect(function () {\n    if (!pets.length) {\n      setPets(petsArray);\n    }\n  }, [pets.length]);\n  console.log(\"User pets: \", pets);\n  var panResponder = PanResponder.create({\n    onMoveShouldSetPanResponder: function onMoveShouldSetPanResponder() {\n      return true;\n    },\n    onPanResponderMove: function onPanResponderMove(_, _ref2) {\n      var dx = _ref2.dx,\n          dy = _ref2.dy,\n          y0 = _ref2.y0;\n      swipe.setValue({\n        x: dx,\n        y: dy\n      });\n      tiltSign.setValue(y0 > CARD.HEIGHT / 2 ? 1 : -1);\n    },\n    onPanResponderRelease: function onPanResponderRelease(_, _ref3) {\n      var dx = _ref3.dx,\n          dy = _ref3.dy;\n      var direction = Math.sign(dx);\n      var isActionActive = Math.abs(dx) > ACTION_OFFSET;\n\n      if (isActionActive) {\n        Animated.timing(swipe, {\n          duration: 200,\n          toValue: {\n            x: direction * CARD.OUT_OF_SCREEN,\n            y: dy\n          },\n          useNativeDriver: true\n        }).start(removeTopCard);\n      } else {\n        Animated.spring(swipe, {\n          toValue: {\n            x: 0,\n            y: 0\n          },\n          useNativeDriver: true,\n          friction: 5\n        }).start();\n      }\n    }\n  });\n  var removeTopCard = useCallback(function () {\n    setPets(function (prevState) {\n      return prevState.slice(1);\n    });\n    swipe.setValue({\n      x: 0,\n      y: 0\n    });\n  }, [swipe]);\n  var handleChoice = useCallback(function (direction) {\n    Animated.timing(swipe.x, {\n      toValue: direction * CARD.OUT_OF_SCREEN,\n      duration: 400,\n      useNativeDriver: true\n    }).start(removeTopCard);\n  }, [removeTopCard, swipe.x]);\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsxs(View, {\n      style: {\n        flexDirection: \"row\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n        width: \"100%\",\n        paddingHorizontal: 20,\n        paddingTop: 20\n      },\n      children: [_jsxs(View, {\n        style: {\n          flexDirection: \"row\",\n          alignItems: \"center\"\n        },\n        children: [_jsx(View, {\n          children: _jsx(Image, {\n            source: require(\"../../../../image/star.png\")\n          })\n        }), _jsx(View, {\n          children: _jsx(Text, {\n            style: {\n              fontSize: 25\n            },\n            children: \"GenzLove\"\n          })\n        })]\n      }), _jsx(View, {\n        children: _jsx(Image, {\n          source: require(\"../../../../image/lui.png\")\n        })\n      })]\n    }), pets.map(function (_ref4, index) {\n      var id = _ref4.id,\n          name = _ref4.name,\n          source = _ref4.source,\n          tuoi = _ref4.tuoi,\n          diachi = _ref4.diachi;\n      var isFirst = index === 0;\n      var dragHandlers = isFirst ? panResponder.panHandlers : {};\n      console.log(\"id\" + id);\n      return _jsx(Pressable, {\n        onPress: function onPress() {\n          return navigation.navigate(\"ProfileFriend\", {\n            id: id\n          });\n        },\n        style: {\n          width: \"90%\",\n          height: \"100%\",\n          position: \"absolute\"\n        },\n        children: _jsx(Card, _objectSpread({\n          name: name,\n          source: source,\n          tuoi: tuoi,\n          diachi: diachi,\n          isFirst: isFirst,\n          swipe: swipe,\n          tiltSign: tiltSign\n        }, dragHandlers), id)\n      });\n    }).reverse(), _jsx(Footer, {\n      handleChoice: handleChoice\n    })]\n  });\n}","map":{"version":3,"names":["React","useCallback","useEffect","useRef","useState","Card","Footer","ACTION_OFFSET","CARD","pets","petsArray","styles","Main","route","navigation","setPets","swipe","Animated","ValueXY","current","tiltSign","Value","length","console","log","panResponder","PanResponder","create","onMoveShouldSetPanResponder","onPanResponderMove","_","dx","dy","y0","setValue","x","y","HEIGHT","onPanResponderRelease","direction","Math","sign","isActionActive","abs","timing","duration","toValue","OUT_OF_SCREEN","useNativeDriver","start","removeTopCard","spring","friction","prevState","slice","handleChoice","container","flexDirection","alignItems","justifyContent","width","paddingHorizontal","paddingTop","require","fontSize","map","index","id","name","source","tuoi","diachi","isFirst","dragHandlers","panHandlers","navigate","height","position","reverse"],"sources":["D:/All/DuAnTotNghiep_ReactNative/GiaoDienApp/src/layout/product/Home/Main/index.js"],"sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport {\r\n  Animated,\r\n  PanResponder,\r\n  View,\r\n  Pressable,\r\n  Image,\r\n  Text,\r\n} from \"react-native\";\r\n\r\nimport Card from \"../Card\";\r\nimport Footer from \"../Footer\";\r\nimport { ACTION_OFFSET, CARD } from \"../utils/constants\";\r\nimport { pets as petsArray } from \"./data\";\r\nimport { styles } from \"./styles\";\r\n\r\nexport default function Main({ route, navigation }) {\r\n  const [pets, setPets] = useState(petsArray);\r\n  const swipe = useRef(new Animated.ValueXY()).current;\r\n  const tiltSign = useRef(new Animated.Value(1)).current;\r\n\r\n  useEffect(() => {\r\n    if (!pets.length) {\r\n      setPets(petsArray);\r\n    }\r\n  }, [pets.length]);\r\n  console.log(\"User pets: \", pets);\r\n\r\n  const panResponder = PanResponder.create({\r\n    onMoveShouldSetPanResponder: () => true,\r\n    onPanResponderMove: (_, { dx, dy, y0 }) => {\r\n      swipe.setValue({ x: dx, y: dy });\r\n      tiltSign.setValue(y0 > CARD.HEIGHT / 2 ? 1 : -1);\r\n    },\r\n    onPanResponderRelease: (_, { dx, dy }) => {\r\n      const direction = Math.sign(dx);\r\n      const isActionActive = Math.abs(dx) > ACTION_OFFSET;\r\n\r\n      if (isActionActive) {\r\n        Animated.timing(swipe, {\r\n          duration: 200,\r\n          toValue: {\r\n            x: direction * CARD.OUT_OF_SCREEN,\r\n            y: dy,\r\n          },\r\n          useNativeDriver: true,\r\n        }).start(removeTopCard);\r\n      } else {\r\n        Animated.spring(swipe, {\r\n          toValue: {\r\n            x: 0,\r\n            y: 0,\r\n          },\r\n          useNativeDriver: true,\r\n          friction: 5,\r\n        }).start();\r\n      }\r\n    },\r\n  });\r\n\r\n  const removeTopCard = useCallback(() => {\r\n    setPets((prevState) => prevState.slice(1));\r\n    swipe.setValue({ x: 0, y: 0 });\r\n  }, [swipe]);\r\n\r\n  const handleChoice = useCallback(\r\n    (direction) => {\r\n      Animated.timing(swipe.x, {\r\n        toValue: direction * CARD.OUT_OF_SCREEN,\r\n        duration: 400,\r\n        useNativeDriver: true,\r\n      }).start(removeTopCard);\r\n    },\r\n    [removeTopCard, swipe.x]\r\n  );\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <View\r\n        style={{\r\n          flexDirection: \"row\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"space-between\",\r\n          width: \"100%\",\r\n          paddingHorizontal: 20,\r\n          paddingTop: 20,\r\n        }}\r\n      >\r\n        <View style={{ flexDirection: \"row\", alignItems: \"center\" }}>\r\n          <View>\r\n            <Image source={require(\"../../../../image/star.png\")} />\r\n          </View>\r\n          <View>\r\n            <Text style={{ fontSize: 25 }}>GenzLove</Text>\r\n          </View>\r\n        </View>\r\n\r\n        <View>\r\n          <Image source={require(\"../../../../image/lui.png\")} />\r\n        </View>\r\n      </View>\r\n      {pets\r\n        .map(({ id, name, source, tuoi, diachi }, index) => {\r\n          const isFirst = index === 0;\r\n          const dragHandlers = isFirst ? panResponder.panHandlers : {};\r\n          console.log(\"id\" + id);\r\n          return (\r\n            <Pressable\r\n              onPress={() => navigation.navigate(\"ProfileFriend\", { id })}\r\n              style={{ width: \"90%\", height: \"100%\", position: \"absolute\" }}\r\n            >\r\n              <Card\r\n                key={id}\r\n                name={name}\r\n                source={source}\r\n                tuoi={tuoi}\r\n                diachi={diachi}\r\n                isFirst={isFirst}\r\n                swipe={swipe}\r\n                tiltSign={tiltSign}\r\n                {...dragHandlers}\r\n              ></Card>\r\n            </Pressable>\r\n          );\r\n        })\r\n        .reverse()}\r\n\r\n      <Footer handleChoice={handleChoice} />\r\n    </View>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}