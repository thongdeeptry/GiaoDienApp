{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport firebase from 'firebase/compat/app';\nimport 'firebase/compat/auth';\nimport * as React from 'react';\n\nvar FirebaseRecaptchaVerifierModal = function (_React$Component) {\n  _inherits(FirebaseRecaptchaVerifierModal, _React$Component);\n\n  var _super = _createSuper(FirebaseRecaptchaVerifierModal);\n\n  function FirebaseRecaptchaVerifierModal() {\n    var _this;\n\n    _classCallCheck(this, FirebaseRecaptchaVerifierModal);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.verifier = null;\n\n    _this.setRef = function (ref) {\n      if (ref) {\n        if (_this.props.appVerificationDisabledForTesting !== undefined) {\n          firebase.auth().settings.appVerificationDisabledForTesting = !!_this.props.appVerificationDisabledForTesting;\n        }\n\n        if (_this.props.languageCode) {\n          firebase.auth().languageCode = _this.props.languageCode;\n        }\n\n        _this.verifier = new firebase.auth.RecaptchaVerifier(ref, {\n          size: _this.props.attemptInvisibleVerification ? 'invisible' : 'normal'\n        });\n      } else {\n        _this.verifier = null;\n      }\n\n      if (_this.props.innerRef) {\n        _this.props.innerRef.current = _this.verifier;\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(FirebaseRecaptchaVerifierModal, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      return this.props.appVerificationDisabledForTesting !== nextProps.appVerificationDisabledForTesting || this.props.attemptInvisibleVerification !== nextProps.attemptInvisibleVerification || this.props.languageCode !== nextProps.languageCode;\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.innerRef !== prevProps.innerRef) {\n        if (this.props.innerRef) {\n          this.props.innerRef.current = this.verifier;\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          attemptInvisibleVerification = _this$props.attemptInvisibleVerification,\n          appVerificationDisabledForTesting = _this$props.appVerificationDisabledForTesting,\n          languageCode = _this$props.languageCode;\n      return React.createElement(\"div\", {\n        style: styles.container,\n        key: (attemptInvisibleVerification ? 'invisible' : 'visible') + \"-\" + (appVerificationDisabledForTesting ? 'testing' : 'regular') + \"-\" + (languageCode != null ? languageCode : ''),\n        id: \"recaptcha-container\",\n        ref: this.setRef,\n        dangerouslySetInnerHTML: {\n          __html: ''\n        }\n      });\n    }\n  }]);\n\n  return FirebaseRecaptchaVerifierModal;\n}(React.Component);\n\nexport default React.forwardRef(function (props, ref) {\n  return React.createElement(FirebaseRecaptchaVerifierModal, _objectSpread(_objectSpread({}, props), {}, {\n    innerRef: ref\n  }));\n});\nvar styles = {\n  container: {\n    zIndex: 1000\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;AAAA,OAAOA,QAAP,MAAqB,qBAArB;AACA,OAAO,sBAAP;AACA,OAAO,KAAKC,KAAZ,MAAuB,OAAvB;;IAWMC,8B;;;;;;;;;;;;;;;UACIC,Q,GAAmD,I;;UAEnDC,M,GAAS,UAACC,GAAD,EAAa;MAC5B,IAAIA,GAAJ,EAAS;QACP,IAAI,MAAKC,KAAL,CAAWC,iCAAX,KAAiDC,SAArD,EAAgE;UAC9DR,QAAQ,CAACS,IAAT,GAAgBC,QAAhB,CAAyBH,iCAAzB,GACE,CAAC,CAAC,MAAKD,KAAL,CAAWC,iCADf;QAED;;QACD,IAAI,MAAKD,KAAL,CAAWK,YAAf,EAA6B;UAC3BX,QAAQ,CAACS,IAAT,GAAgBE,YAAhB,GAA+B,MAAKL,KAAL,CAAWK,YAA1C;QACD;;QACD,MAAKR,QAAL,GAAgB,IAAIH,QAAQ,CAACS,IAAT,CAAcG,iBAAlB,CAAoCP,GAApC,EAAyC;UACvDQ,IAAI,EAAE,MAAKP,KAAL,CAAWQ,4BAAX,GAA0C,WAA1C,GAAwD;QADP,CAAzC,CAAhB;MAGD,CAXD,MAWO;QACL,MAAKX,QAAL,GAAgB,IAAhB;MACD;;MACD,IAAI,MAAKG,KAAL,CAAWS,QAAf,EAAyB;QACvB,MAAKT,KAAL,CAAWS,QAAX,CAAoBC,OAApB,GAA8B,MAAKb,QAAnC;MACD;IACF,C;;;;;;;WAED,+BAAsBc,SAAtB,EAAsC;MACpC,OACE,KAAKX,KAAL,CAAWC,iCAAX,KACEU,SAAS,CAACV,iCADZ,IAEA,KAAKD,KAAL,CAAWQ,4BAAX,KAA4CG,SAAS,CAACH,4BAFtD,IAGA,KAAKR,KAAL,CAAWK,YAAX,KAA4BM,SAAS,CAACN,YAJxC;IAMD;;;WAED,4BAAmBO,SAAnB,EAAmC;MACjC,IAAI,KAAKZ,KAAL,CAAWS,QAAX,KAAwBG,SAAS,CAACH,QAAtC,EAAgD;QAC9C,IAAI,KAAKT,KAAL,CAAWS,QAAf,EAAyB;UACvB,KAAKT,KAAL,CAAWS,QAAX,CAAoBC,OAApB,GAA8B,KAAKb,QAAnC;QACD;MACF;IACF;;;WAED,kBAAM;MACJ,kBACE,KAAKG,KADP;MAAA,IAAQQ,4BAAR,eAAQA,4BAAR;MAAA,IAAsCP,iCAAtC,eAAsCA,iCAAtC;MAAA,IAAyEI,YAAzE,eAAyEA,YAAzE;MAEA,OACEV;QACEkB,KAAK,EAAEC,MAAM,CAACC,SADhB;QAEEC,GAAG,GAAKR,4BAA4B,GAAG,WAAH,GAAiB,SAAlD,WACDP,iCAAiC,GAAG,SAAH,GAAe,SAD/C,WAECI,YAFD,WAECA,YAFD,GAEiB,EAFjB,CAFL;QAKEY,EAAE,EAAC,qBALL;QAMElB,GAAG,EAAE,KAAKD,MANZ;QAOEoB,uBAAuB,EAAE;UAAEC,MAAM,EAAE;QAAV;MAP3B,EADF;IAWD;;;;EAtD0CxB,KAAK,CAACyB,S;;AAyDnD,eAAezB,KAAK,CAAC0B,UAAN,CAAiB,UAACrB,KAAD,EAAiCD,GAAjC;EAAA,OAC9BJ,oBAACC,8BAAD,kCAAoCI,KAApC;IAA2CS,QAAQ,EAAEV;EAArD,GAD8B;AAAA,CAAjB,CAAf;AAIA,IAAMe,MAAM,GAAG;EAEbC,SAAS,EAAE;IAAEO,MAAM,EAAE;EAAV;AAFE,CAAf","names":["firebase","React","FirebaseRecaptchaVerifierModal","verifier","setRef","ref","props","appVerificationDisabledForTesting","undefined","auth","settings","languageCode","RecaptchaVerifier","size","attemptInvisibleVerification","innerRef","current","nextProps","prevProps","style","styles","container","key","id","dangerouslySetInnerHTML","__html","Component","forwardRef","zIndex"],"sourceRoot":"","sources":["../src/FirebaseRecaptchaVerifierModal.web.tsx"],"sourcesContent":["import firebase from 'firebase/compat/app';\nimport 'firebase/compat/auth';\nimport * as React from 'react';\n\nimport { FirebaseAuthApplicationVerifier } from './FirebaseRecaptcha.types';\n\ninterface Props {\n  attemptInvisibleVerification?: boolean;\n  appVerificationDisabledForTesting?: boolean;\n  languageCode?: string;\n  innerRef: React.MutableRefObject<FirebaseAuthApplicationVerifier | null>;\n}\n\nclass FirebaseRecaptchaVerifierModal extends React.Component<Props> {\n  private verifier: FirebaseAuthApplicationVerifier | null = null;\n\n  private setRef = (ref: any) => {\n    if (ref) {\n      if (this.props.appVerificationDisabledForTesting !== undefined) {\n        firebase.auth().settings.appVerificationDisabledForTesting =\n          !!this.props.appVerificationDisabledForTesting;\n      }\n      if (this.props.languageCode) {\n        firebase.auth().languageCode = this.props.languageCode;\n      }\n      this.verifier = new firebase.auth.RecaptchaVerifier(ref, {\n        size: this.props.attemptInvisibleVerification ? 'invisible' : 'normal',\n      });\n    } else {\n      this.verifier = null;\n    }\n    if (this.props.innerRef) {\n      this.props.innerRef.current = this.verifier;\n    }\n  };\n\n  shouldComponentUpdate(nextProps: Props) {\n    return (\n      this.props.appVerificationDisabledForTesting !==\n        nextProps.appVerificationDisabledForTesting ||\n      this.props.attemptInvisibleVerification !== nextProps.attemptInvisibleVerification ||\n      this.props.languageCode !== nextProps.languageCode\n    );\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (this.props.innerRef !== prevProps.innerRef) {\n      if (this.props.innerRef) {\n        this.props.innerRef.current = this.verifier;\n      }\n    }\n  }\n\n  render() {\n    const { attemptInvisibleVerification, appVerificationDisabledForTesting, languageCode } =\n      this.props;\n    return (\n      <div\n        style={styles.container}\n        key={`${attemptInvisibleVerification ? 'invisible' : 'visible'}-${\n          appVerificationDisabledForTesting ? 'testing' : 'regular'\n        }-${languageCode ?? ''}`}\n        id=\"recaptcha-container\"\n        ref={this.setRef}\n        dangerouslySetInnerHTML={{ __html: '' }}\n      />\n    );\n  }\n}\n\nexport default React.forwardRef((props: Omit<Props, 'innerRef'>, ref: any) => (\n  <FirebaseRecaptchaVerifierModal {...props} innerRef={ref} />\n));\n\nconst styles = {\n  // Ensure the reCAPTCHA badge is in front or other elements\n  container: { zIndex: 1000 },\n};\n"]},"metadata":{},"sourceType":"module"}